<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>jQuery Calculator</title>

    <!-- Added link to the jQuery Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <!-- Added a link to Bootstrap-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7"
        crossorigin="anonymous">
    <!-- add link to css stylesheet that'll overide any previous css based on the bottom placement -->
    <link rel="stylesheet" href="assets/css/style.css">
</head>

<body>

    <div class="jumbotron">
        <h1 id="mainTitle" class="text-center">Crystal Collector!!</h1>
           </div>

    <div class="container">

        <div class="row">

            <!-- top blank panel -->
            <div class="col-lg-12">
                <div class="panel panel-default">
                    <div id="classHeading2" class="panel-heading">
                        <h2 class="panel-title"></h2>
                    </div>
                    <!-- Instruction Panel -->
                    <div id="panelBody" class="panel-body">
                        <div id="instructions" class="col-lg-6">
                            <h4>You will be given a random number at the start of the game.</h4>

                            <h4>There are four crystals below. By clicking on a crystal, you will add a specific amount of points
                                to your total score.</h4>

                            <h4>You win the game by matching your total score to the random number. You lose the game if your
                                total score goes above the random number.</h4>

                            <h4>The value of each crystal is hidden to you until you click on it.</h4>

                            <h4>Each time the game starts, the game will change the values of each crystal.</h4>

                            <h4>Good luck!</h4>
                        </div>
                        
                        <br>
                        <br>
                        <br>
                        <br>
                        <br>
                        <br>
                        <br>
                        <br>
                        <br>
                        <br>
                        <br>
                        <br>
                        <br>
                        <br>

                        <div id="totalScoreTargetBox" class="col-lg-3">
                            <h1 id="totalScoreTarget">0</h1>
                        </div>
                        <div id="winsLosesBox" class="col-lg-2">
                            <h4 id="wins">Wins:</h4>
                            <h4 id="losses">Loses:</h4>
                        </div>

                        <br>
                        <br>
                        <br>
                        <br>
                        <br>
                        <br>

                        <div id="gem1" class="crystal" value=0>
                            <img src="assets/images/ruby.jpg" alt="ruby" style="width:95%; height:95%;padding:2.5%;">
                        </div>
                        <div id="gem2" class="crystal" value=0>
                            <img src="assets/images/Blue-Crystal-Abstract.jpg" alt="blue crystal" style="width:95%; height:95%;">
                        </div>
                        <div id="gem3" class="crystal" value=0>
                            <img src="assets/images/topaz.jpg" alt="topaz" style="width:95%; height:95%;">
                        </div>
                        <div id="gem4" class="crystal" value=0>
                            <img src="assets/images/emerald.jpg" alt="emerald" style="width:95%; height:95%;">
                        </div>

                        <br>
                        <br>
                        <br>
                        <br>
                        <br>
                        <br>
                        <br>
                        <br>

                        <div id="totalScoreTextBox" class="col-lg-6">
                            <h3>Your Total Score Is</h3>
                        </div>
                        <br>
                        <br>
                        <br>
                        <br>
                        <br>
                        <div id="currentTotalScoreBox" class="col-lg-6">
                            <h1 id="currentTotalScore">0</h1>
                        </div>
                    </div>

                </div>
            </div>

            <script type="text/javascript">
                $(document).ready(function () {

                    var gem1;
                    var gem2;
                    var gem3;
                    var gem4;
                    var totalScore = 0;
                    var totalScoreTarget;
                    var win = 0;
                    var loss = 0;
                    isTotalEqualTarget = false;
                    isTotalGreaterThanTarget = false;
                    initializeGame();

                    // Use a function to reset the game and assign new crystal values and target value.
                    function initializeGame() {

                        totalScore = 0;
                        gem1 = Math.floor((Math.random() * 12) + 1);
                        gem2 = Math.floor((Math.random() * 12) + 1);
                        gem3 = Math.floor((Math.random() * 12) + 1);
                        gem4 = Math.floor((Math.random() * 12) + 1);
                        totalScoreTarget = Math.floor((Math.random() * 101) + 19);
                        $("#totalScoreTarget").text(totalScoreTarget);
                        $("#currentTotalScore").text(totalScore);
                        $("#wins").text("Wins: " + win);
                        $("#losses").text("Loses: " + loss);

                        //set the value for the containers holding the gem images
                        $("#gem1").val(gem1);
                        $("#gem2").val(gem2);
                        $("#gem3").val(gem3);
                        $("#gem4").val(gem4);
                        isTotalEqualTarget = false;
                        isTotalGreaterThanTarget = false;
                    }
                    //#########################################################################################################

                    // Add an on click listener to all elements that have the class "crystal"
                    $(".crystal").on("click", function () {

                        var thisValue = $(this).val();
                        // totalScore =  $(this).val() + totalScore;
                        totalScore = totalScore + parseInt(thisValue);
                        $("#currentTotalScore").text(totalScore);
                        if (totalScore === totalScoreTarget) {
                            isTotalEqualTarget = true;
                            $("#currentTotalScore").text(totalScore);
                          
                            alert("You Win!");
                            setTimeout(function () {
                                win = win + 1;
                            }, 1500);
                            setTimeout(function () {
                                initializeGame();
                            }, 1500);;
                        }

                        if (totalScore > totalScoreTarget) {
                            isTotalGreaterThanTarget = true;
                            $("#currentTotalScore").text(totalScore);
                           
                            alert("You Lose, Try Again!");
                            setTimeout(function () {
                                loss = loss + 1;
                            }, 1500);
                            setTimeout(function () {
                                initializeGame();
                            }, 1500);;
                        }

                    });
                    //#########################################################################################################
                });
            </script>
</body>

</html>